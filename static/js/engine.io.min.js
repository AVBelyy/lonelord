(function(){function d(c,b,n){var a=d.resolve(c);if(null==a)throw n=n||c,b=b||"root",a=Error('Failed to require "'+n+'" from "'+b+'"'),a.path=n,a.parent=b,a.require=!0,a;b=d.modules[a];b.exports||(b.exports={},b.client=b.component=!0,b.call(this,b.exports,d.relative(a),b));return b.exports}d.modules={};d.aliases={};d.resolve=function(c){"/"===c.charAt(0)&&(c=c.slice(1));for(var b=c+"/index.js",n=[c,c+".js",c+".json",c+"/index.js",c+"/index.json"],a=0;a<n.length;a++)if(c=n[a],d.modules.hasOwnProperty(c))return c;
if(d.aliases.hasOwnProperty(b))return d.aliases[b]};d.normalize=function(c,b){var d=[];if("."!=b.charAt(0))return b;c=c.split("/");b=b.split("/");for(var a=0;a<b.length;++a)".."==b[a]?c.pop():"."!=b[a]&&""!=b[a]&&d.push(b[a]);return c.concat(d).join("/")};d.register=function(c,b){d.modules[c]=b};d.alias=function(c,b){if(!d.modules.hasOwnProperty(c))throw Error('Failed to alias "'+c+'", it does not exist');d.aliases[b]=c};d.relative=function(c){function b(a){var k=b.resolve(a);return d(k,c,a)}var n=
d.normalize(c,"..");b.resolve=function(a){var b=a.charAt(0);if("/"==b)return a.slice(1);if("."==b)return d.normalize(n,a);var b=c.split("/"),e;a:{for(e=b.length;e--;)if("deps"===b[e])break a;e=-1}(e+=1)||(e=0);return a=b.slice(0,e+1).join("/")+"/deps/"+a};b.exists=function(a){return d.modules.hasOwnProperty(b.resolve(a))};return b};d.register("component-emitter/index.js",function(c,b,d){function a(b){if(b){for(var e in a.prototype)b[e]=a.prototype[e];return b}}d.exports=a;a.prototype.on=function(a,
b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};a.prototype.once=function(a,b){function c(){h.off(a,c);b.apply(this,arguments)}var h=this;this._callbacks=this._callbacks||{};b._off=c;this.on(a,c);return this};a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],
this;var h=c.indexOf(b._off||b);~h&&c.splice(h,1);return this};a.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c)for(var c=c.slice(0),h=0,d=c.length;h<d;++h)c[h].apply(this,b);return this};a.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};a.prototype.hasListeners=function(a){return!!this.listeners(a).length}});d.register("component-indexof/index.js",function(c,b,d){var a=[].indexOf;
d.exports=function(b,c){if(a)return b.indexOf(c);for(var f=0;f<b.length;++f)if(b[f]===c)return f;return-1}});d.register("LearnBoost-engine.io-protocol/lib/index.js",function(c,b,d){b=b("./keys");c.protocol=2;var a=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},k=b(a),e={type:"error",data:"parser error"};c.encodePacket=function(b){var c=a[b.type];void 0!==b.data&&(c+=String(b.data));return""+c};c.decodePacket=function(a){var b=a.charAt(0);return Number(b)==b&&k[b]?1<a.length?{type:k[b],
data:a.substring(1)}:{type:k[b]}:e};c.encodePayload=function(a){if(!a.length)return"0:";for(var b="",e,l=0,p=a.length;l<p;l++)e=c.encodePacket(a[l]),b+=e.length+":"+e;return b};c.decodePayload=function(a,b){var d;if(""==a)return b(e,0,1);d="";for(var l,p,g=0,q=a.length;g<q;g++)if(p=a.charAt(g),":"!=p)d+=p;else{if(""==d||d!=(l=Number(d)))return b(e,0,1);p=a.substr(g+1,l);if(d!=p.length)return b(e,0,1);if(p.length){d=c.decodePacket(p);if(e.type==d.type&&e.data==d.data)return b(e,0,1);if(!1===b(d,g+
l,q))return}g+=l;d=""}if(""!=d)return b(e,0,1)}});d.register("LearnBoost-engine.io-protocol/lib/keys.js",function(c,b,d){d.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty,d;for(d in a)c.call(a,d)&&b.push(d);return b}});d.register("visionmedia-debug/index.js",function(c,b,d){d.exports="undefined"==typeof window?b("./lib/debug"):b("./debug")});d.register("visionmedia-debug/debug.js",function(c,b,d){function a(b){return a.enabled(b)?function(c){c instanceof Error&&(c=c.stack||
c.message);var d=new Date,h=d-(a[b]||d);a[b]=d;c=b+" "+c+" +"+a.humanize(h);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}d.exports=a;a.names=[];a.skips=[];a.enable=function(b){try{localStorage.debug=b}catch(c){}for(var d=(b||"").split(/[\s,]+/),h=d.length,n=0;n<h;n++)b=d[n].replace("*",".*?"),"-"===b[0]?a.skips.push(RegExp("^"+b.substr(1)+"$")):a.names.push(RegExp("^"+b+"$"))};a.disable=function(){a.enable("")};a.humanize=function(a){return 36E5<=
a?(a/36E5).toFixed(1)+"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=a?(a/1E3|0)+"s":a+"ms"};a.enabled=function(b){for(var c=0,d=a.skips.length;c<d;c++)if(a.skips[c].test(b))return!1;c=0;for(d=a.names.length;c<d;c++)if(a.names[c].test(b))return!0;return!1};window.localStorage&&a.enable(localStorage.debug)});d.register("engine.io/lib/index.js",function(c,b,d){d.exports=b("./socket");d.exports.parser=b("engine.io-parser")});d.register("engine.io/lib/socket.js",function(c,b,d){function a(b,g){if(!(this instanceof
a))return new a(b,g);g=g||{};"object"==typeof b&&(g=b,b=null);b&&(b=k.parseUri(b),g.host=b.host,g.secure="https"==b.protocol||"wss"==b.protocol,g.port=b.port,b.query&&(g.query=b.query));this.secure=null!=g.secure?g.secure:l.location&&"https:"==location.protocol;if(g.host){var c=g.host.split(":");g.hostname=c.shift();c.length&&(g.port=c.pop())}this.hostname=g.hostname||(l.location?location.hostname:"localhost");this.port=g.port||(l.location&&location.port?location.port:this.secure?443:80);this.query=
g.query||{};"string"==typeof this.query&&(this.query=k.qsParse(this.query));this.upgrade=!1!==g.upgrade;this.path=(g.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!g.forceJSONP;this.timestampParam=g.timestampParam||"t";this.timestampRequests=!!g.timestampRequests;this.flashPath=g.flashPath||"";this.transports=g.transports||["polling","websocket","flashsocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=g.policyPort||843;this.open();a.sockets.push(this);
a.sockets.evs.emit("add",this)}var k=b("./util"),e=b("./transports");c=b("./emitter");var f=b("debug")("engine-client:socket"),h=b("indexof"),m=b("engine.io-parser");d.exports=a;var l=k.global();c(a.prototype);a.protocol=m.protocol;a.sockets=[];a.sockets.evs=new c;a.Socket=a;a.Transport=b("./transport");a.Emitter=b("./emitter");a.transports=b("./transports");a.util=b("./util");a.parser=b("engine.io-parser");a.prototype.createTransport=function(a){f('creating transport "%s"',a);var b=this.query,c=
{},d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);c.EIO=m.protocol;c.transport=a;this.id&&(c.sid=this.id);return new e[a]({hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:c,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort})};a.prototype.open=function(){this.readyState="opening";var a=this.createTransport(this.transports[0]);a.open();this.setTransport(a)};a.prototype.setTransport=
function(a){var b=this;this.transport&&(f("clearing existing transport"),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})};a.prototype.probe=function(a){function b(g){if(!d){d=!0;var e=Error("probe error: "+g);e.transport=c.name;c.close();c=null;f('probe transport "%s" failed because of error: %s',a,g);l.emit("error",e)}}f('probing transport "%s"',
a);var c=this.createTransport(a,{probe:1}),d=!1,l=this;c.once("open",function(){d||(f('probe transport "%s" opened',a),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(e){d||("pong"==e.type&&"probe"==e.data?(f('probe transport "%s" pong',a),l.upgrading=!0,l.emit("upgrading",c),f('pausing current transport "%s"',l.transport.name),l.transport.pause(function(){d||("closed"==l.readyState||"closing"==l.readyState)||(f("changing transport and sending upgrade packet"),c.removeListener("error",
b),l.emit("upgrade",c),l.setTransport(c),c.send([{type:"upgrade"}]),c=null,l.upgrading=!1,l.flush())})):(f('probe transport "%s" failed',a),e=Error("probe error"),e.transport=c.name,l.emit("error",e)))}))});c.once("error",b);c.open();this.once("close",function(){c&&(f("socket closed prematurely - aborting probe"),d=!0,c.close(),c=null)});this.once("upgrading",function(a){c&&a.name!=c.name&&(f('"%s" works - aborting "%s"',a.name,c.name),c.close(),c=null)})};a.prototype.onOpen=function(){f("socket open");
this.readyState="open";this.emit("open");this.onopen&&this.onopen.call(this);this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){f("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};a.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(f('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(k.parseJSON(a.data));
break;case "pong":this.setPing();break;case "error":var b=Error("server error");b.code=a.data;this.emit("error",b);break;case "message":this.emit("data",a.data),this.emit("message",a.data),b={data:a.data,toString:function(){return a.data}},this.onmessage&&this.onmessage.call(this,b)}else f('packet received with socket readyState "%s"',this.readyState)};a.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);
this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};a.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};a.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){f("writing ping packet - expecting pong within %sms",
a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};a.prototype.ping=function(){this.sendPacket("ping")};a.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)if(this.callbackBuffer[a])this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0==this.writeBuffer.length?this.emit("drain"):this.flush()};a.prototype.flush=function(){"closed"!=this.readyState&&(this.transport.writable&&
!this.upgrading&&this.writeBuffer.length)&&(f("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};a.prototype.write=a.prototype.send=function(a,b){this.sendPacket("message",a,b);return this};a.prototype.sendPacket=function(a,b,c){a={type:a,data:b};this.emit("packetCreate",a);this.writeBuffer.push(a);this.callbackBuffer.push(c);this.flush()};a.prototype.close=function(){if("opening"==this.readyState||
"open"==this.readyState)this.onClose("forced close"),f("socket closing - telling transport to close"),this.transport.close();return this};a.prototype.onError=function(a){f("socket error %j",a);this.emit("error",a);this.onerror&&this.onerror.call(this,a);this.onClose("transport error",a)};a.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState){f('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);
setTimeout(function(){c.writeBuffer=[];c.callbackBuffer=[]},0);this.transport.removeAllListeners();var d=this.readyState;this.readyState="closed";this.id=null;"open"==d&&(this.emit("close",a,b),this.onclose&&this.onclose.call(this))}};a.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~h(this.transports,a[c])&&b.push(a[c]);return b}});d.register("engine.io/lib/transport.js",function(c,b,d){function a(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=
a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState=""}b("./util");var k=b("engine.io-parser");c=b("./emitter");d.exports=a;c(a.prototype);a.prototype.onError=function(a,b){var c=Error(a);c.type="TransportError";c.description=b;this.emit("error",c);return this};a.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};a.prototype.close=function(){if("opening"==
this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};a.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};a.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};a.prototype.onData=function(a){this.onPacket(k.decodePacket(a))};a.prototype.onPacket=function(a){this.emit("packet",a)};a.prototype.onClose=function(){this.readyState="closed";this.emit("close")}});d.register("engine.io/lib/emitter.js",
function(c,b,d){c=b("emitter");d.exports=c;c.prototype.addEventListener=c.prototype.on;c.prototype.removeEventListener=c.prototype.off;c.prototype.removeListener=c.prototype.off});d.register("engine.io/lib/util.js",function(c,b,d){var a=!1;c.global=function(){return"undefined"!=typeof window?window:global};c.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c};c.keys=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty,g;for(g in a)c.call(a,g)&&b.push(g);
return b};c.on=function(a,b,c,g){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,g)};c.load=function(b){var g=c.global();if(g.document&&"complete"===document.readyState||a)return b();c.on(g,"load",b,!1)};"undefined"!=typeof window&&c.load(function(){a=!0});c.defer=function(a){if(!c.ua.webkit||"undefined"!=typeof importScripts)return a();c.load(function(){setTimeout(a,100)})};var k=/^[\],:{}\s]*$/,e=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,f=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
h=/(?:^|:|,)(?:\s*\[)+/g,m=/^\s+/,l=/\s+$/;c.parseJSON=function(a){var b=c.global();if("string"!=typeof a||!a)return null;a=a.replace(m,"").replace(l,"");if(b.JSON&&JSON.parse)return JSON.parse(a);if(k.test(a.replace(e,"@").replace(f,"]").replace(h,"")))return(new Function("return "+a))()};c.ua={};c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){var a;try{a=new XMLHttpRequest}catch(b){return!1}return void 0!=a.withCredentials}();c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);
c.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);c.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent);c.ua.ios="undefined"!=typeof navigator&&/^(iPad|iPhone|iPod)$/.test(navigator.platform);c.ua.ios6=c.ua.ios&&/OS 6_/.test(navigator.userAgent);c.request=function(a){try{return new (b("xmlhttprequest").XMLHttpRequest)}catch(g){}if(a&&"undefined"!=typeof XDomainRequest&&!c.ua.hasCORS)return new XDomainRequest;try{if("undefined"!=typeof XMLHttpRequest&&
(!a||c.ua.hasCORS))return new XMLHttpRequest}catch(d){}if(!a)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(l){}};var p=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");c.parseUri=function(a){a=p.exec(a||"");for(var b={},c=14;c--;)b[g[c]]=
a[c]||"";return b};c.qs=function(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};c.qsParse=function(a){var b={};a=a.split("&");for(var c=0,g=a.length;c<g;c++){var d=a[c].split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b}});d.register("engine.io/lib/transports/index.js",function(c,b,d){var a=b("./polling-xhr"),k=b("./polling-jsonp");d=b("./websocket");var e=b("./flashsocket"),f=b("../util");c.polling=
function(b){var c,d=c=!1;h.location&&(d="https:"==location.protocol,c=location.port,Number(c)!==c&&(c=d?443:80),c=b.hostname!=location.hostname||c!=b.port,d=b.secure!=d);c=f.request(c);return d&&h.XDomainRequest&&c instanceof h.XDomainRequest?new k(b):c&&!b.forceJSONP?new a(b):new k(b)};c.websocket=d;c.flashsocket=e;var h=f.global()});d.register("engine.io/lib/transports/polling.js",function(c,b,d){function a(a){k.call(this,a)}var k=b("../transport"),e=b("../util"),f=b("engine.io-parser"),h=b("debug")("engine.io-client:polling");
d.exports=a;var m=e.global();e.inherits(a,k);a.prototype.name="polling";a.prototype.doOpen=function(){this.poll()};a.prototype.pause=function(a){function b(){h("paused");c.readyState="paused";a()}var c=this;this.readyState="pausing";if(this.polling||!this.writable){var d=0;this.polling&&(h("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){h("pre-pause polling complete");--d||b()}));this.writable||(h("we are currently writing - waiting to pause"),d++,this.once("drain",
function(){h("pre-pause writing complete");--d||b()}))}else b()};a.prototype.poll=function(){h("polling");this.polling=!0;this.doPoll();this.emit("poll")};a.prototype.onData=function(a){var b=this;h("polling got data %s",a);f.decodePayload(a,function(a,c,d){if("opening"==b.readyState)b.onOpen();if("close"==a.type)return b.onClose(),!1;b.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():h('ignoring poll - transport state "%s"',this.readyState))};
a.prototype.doClose=function(){function a(){h("writing close packet");b.write([{type:"close"}])}var b=this;this.open?(h("transport open - closing"),a()):(h("transport not open - defering close"),this.once("open",a))};a.prototype.write=function(a){var b=this;this.writable=!1;this.doWrite(f.encodePayload(a),function(){b.writable=!0;b.emit("drain")})};a.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";if(m.ActiveXObject||e.ua.android||e.ua.ios6||this.timestampRequests)a[this.timestampParam]=
+new Date;a=e.qs(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port);a.length&&(a="?"+a);return b+"://"+this.hostname+c+this.path+a}});d.register("engine.io/lib/transports/polling-xhr.js",function(c,b,d){function a(){}function k(a){f.call(this,a);if(l.location){var b="https:"==location.protocol,c=location.port;Number(c)!==c&&(c=b?443:80);this.xd=a.hostname!=l.location.hostname||c!=a.port}}function e(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.async=
!1!==a.async;this.data=void 0!=a.data?a.data:null;this.create()}var f=b("./polling"),h=b("../util");c=b("../emitter");var m=b("debug")("engine.io-client:polling-xhr");d.exports=k;d.exports.Request=e;var l=h.global(),p=l[["Active"].concat("Object").join("X")];h.inherits(k,f);k.prototype.doOpen=function(){var a=this;h.defer(function(){f.prototype.doOpen.call(a)})};k.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;return new e(a)};k.prototype.doWrite=function(a,b){var c=this.request({method:"POST",
data:a}),d=this;c.on("success",b);c.on("error",function(a){d.onError("xhr post error",a)});this.sendXhr=c};k.prototype.doPoll=function(){m("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};c(e.prototype);e.prototype.create=function(){var b=this.xhr=h.request(this.xd),c=this;b.open(this.method,this.uri,this.async);if("POST"==this.method)try{b.setRequestHeader?b.setRequestHeader("Content-type","text/plain;charset=UTF-8"):
b.contentType="text/plain"}catch(d){}this.xd&&l.XDomainRequest&&b instanceof XDomainRequest?(b.onerror=function(a){c.onError(a)},b.onload=function(){c.onData(b.responseText)},b.onprogress=a):("withCredentials"in b&&(b.withCredentials=!0),b.onreadystatechange=function(){var a;try{if(4!=b.readyState)return;if(200==b.status||1223==b.status)a=b.responseText;else c.onError(b.status)}catch(d){c.onError(d)}if(void 0!==a)c.onData(a)});m("sending xhr with url %s | data %s",this.uri,this.data);b.send(this.data);
p&&(this.index=e.requestsCount++,e.requests[this.index]=this)};e.prototype.onSuccess=function(){this.emit("success");this.cleanup()};e.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};e.prototype.onError=function(a){this.emit("error",a);this.cleanup()};e.prototype.cleanup=function(){if("undefined"!=typeof this.xhr){this.xhr.onreadystatechange=a;this.xhr.onload=this.xhr.onerror=a;try{this.xhr.abort()}catch(b){}p&&delete e.requests[this.index];this.xhr=null}};e.prototype.abort=function(){this.cleanup()};
p&&(e.requestsCount=0,e.requests={},l.attachEvent("onunload",function(){for(var a in e.requests)e.requests.hasOwnProperty(a)&&e.requests[a].abort()}))});d.register("engine.io/lib/transports/polling-jsonp.js",function(c,b,d){function a(a){k.call(this,a);m||(f.___eio||(f.___eio=[]),m=f.___eio);this.index=m.length;var b=this;m.push(function(a){b.onData(a)});this.query.j=this.index}var k=b("./polling"),e=b("../util");d.exports=a;var f=e.global(),h=/\n/g,m;e.inherits(a,k);a.prototype.doOpen=function(){var a=
this;e.defer(function(){k.prototype.doOpen.call(a)})};a.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.form=null);k.prototype.doClose.call(this)};a.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",
b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);this.script=b;e.ua.gecko&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};a.prototype.doWrite=function(a,b){function c(){d();b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{n=document.createElement('<iframe src="javascript:0" name="'+e.iframeId+'">')}catch(b){n=
document.createElement("iframe"),n.name=e.iframeId,n.src="javascript:0"}n.id=e.iframeId;e.form.appendChild(n);e.iframe=n}var e=this;if(!this.form){var f=document.createElement("form"),k=document.createElement("textarea"),m=this.iframeId="eio_iframe_"+this.index,n;f.className="socketio";f.style.position="absolute";f.style.top="-1000px";f.style.left="-1000px";f.target=m;f.method="POST";f.setAttribute("accept-charset","utf-8");k.name="d";f.appendChild(k);document.body.appendChild(f);this.form=f;this.area=
k}this.form.action=this.uri();d();this.area.value=a.replace(h,"\\n");try{this.form.submit()}catch(r){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}});d.register("engine.io/lib/transports/websocket.js",function(c,b,d){function a(a){e.call(this,a)}function k(){return"undefined"==typeof window?b("ws"):m.WebSocket||m.MozWebSocket}var e=b("../transport"),f=b("engine.io-parser"),h=b("../util");b("debug")("engine.io-client:websocket");
d.exports=a;var m=h.global();h.inherits(a,e);a.prototype.name="websocket";a.prototype.doOpen=function(){if(this.check()){var a=this;this.socket=new (k())(this.uri());this.socket.onopen=function(){a.onOpen()};this.socket.onclose=function(){a.onClose()};this.socket.onmessage=function(b){a.onData(b.data)};this.socket.onerror=function(b){a.onError("websocket error",b)}}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(a.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,
a)},0)});a.prototype.write=function(a){function b(){c.writable=!0;c.emit("drain")}var c=this;this.writable=!1;for(var d=0,e=a.length;d<e;d++)this.socket.send(f.encodePacket(a[d]));"bufferedAmount"in this.socket?this.bufferedAmountId=setInterval(function(){0==c.socket.bufferedAmount&&(clearInterval(c.bufferedAmountId),b())},50):setTimeout(b,0)};a.prototype.onClose=function(){clearInterval(this.bufferedAmountId);e.prototype.onClose.call(this)};a.prototype.doClose=function(){"undefined"!==typeof this.socket&&
this.socket.close()};a.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=+new Date);a=h.qs(a);a.length&&(a="?"+a);return b+"://"+this.hostname+c+this.path+a};a.prototype.check=function(){var b=k();return!!b&&!("__initialize"in b&&this.name===a.prototype.name)}});d.register("engine.io/lib/transports/flashsocket.js",function(c,b,d){function a(a){f.call(this,
a);this.flashPath=a.flashPath;this.policyPort=a.policyPort}function k(a,b){if(p[a])return b();var c=document.createElement("script"),d=!1;m('loading "%s"',a);c.onload=c.onreadystatechange=function(){if(!d&&!p[a]){var e=c.readyState;e&&"loaded"!=e&&"complete"!=e||(m('loaded "%s"',a),c.onload=c.onreadystatechange=null,d=!0,p[a]=!0,b())}};c.async=1;c.src=a;var e=document.getElementsByTagName("head")[0];e.insertBefore(c,e.firstChild)}function e(a,b){function c(d){if(!a[d])return b();k(a[d],function(){c(++d)})}
c(0)}var f=b("./websocket"),h=b("../util"),m=b("debug")("engine.io-client:flashsocket");d.exports=a;var l=h.global()[["Active"].concat("Object").join("X")];h.inherits(a,f);a.prototype.name="flashsocket";a.prototype.doOpen=function(){function a(b){return function(){var a=Array.prototype.join.call(arguments," ");m("[websocketjs %s] %s",b,a)}}if(this.check()){WEB_SOCKET_LOGGER={log:a("debug"),error:a("error")};WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0;"undefined"==
typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf");var b=[this.flashPath+"web_socket.js"];"undefined"==typeof swfobject&&b.unshift(this.flashPath+"swfobject.js");var c=this;e(b,function(){c.ready(function(){WebSocket.__addTask(function(){f.prototype.doOpen.call(c)})})})}};a.prototype.doClose=function(){if(this.socket){var a=this;WebSocket.__addTask(function(){f.prototype.doClose.call(a)})}};a.prototype.write=function(){var a=this,b=arguments;WebSocket.__addTask(function(){f.prototype.write.apply(a,
b)})};a.prototype.ready=function(b){function c(){a.loaded||(843!=d.policyPort&&WebSocket.loadFlashPolicyFile("xmlsocket://"+d.host+":"+d.policyPort),WebSocket.__initialize(),a.loaded=!0);b.call(d)}if("undefined"!=typeof WebSocket&&("__initialize"in WebSocket&&swfobject)&&!(10>swfobject.getFlashPlayerVersion().major)){var d=this;if(document.body)return c();h.load(c)}};a.prototype.check=function(){if("undefined"==typeof window||"undefined"!=typeof WebSocket&&!("__initialize"in WebSocket))return!1;if(l){var a=
null;try{a=new l("ShockwaveFlash.ShockwaveFlash")}catch(b){}if(a)return!0}else for(var a=0,c=navigator.plugins.length;a<c;a++)for(var d=0,e=navigator.plugins[a].length;d<e;d++)if("Shockwave Flash"==navigator.plugins[a][d].description)return!0;return!1};var p={}});d.alias("component-emitter/index.js","engine.io/deps/emitter/index.js");d.alias("component-emitter/index.js","emitter/index.js");d.alias("component-indexof/index.js","engine.io/deps/indexof/index.js");d.alias("component-indexof/index.js",
"indexof/index.js");d.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io/deps/engine.io-parser/lib/index.js");d.alias("LearnBoost-engine.io-protocol/lib/keys.js","engine.io/deps/engine.io-parser/lib/keys.js");d.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io/deps/engine.io-parser/index.js");d.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io-parser/index.js");d.alias("LearnBoost-engine.io-protocol/lib/index.js","LearnBoost-engine.io-protocol/index.js");d.alias("visionmedia-debug/index.js",
"engine.io/deps/debug/index.js");d.alias("visionmedia-debug/debug.js","engine.io/deps/debug/debug.js");d.alias("visionmedia-debug/index.js","debug/index.js");d.alias("engine.io/lib/index.js","engine.io/index.js");"object"==typeof exports?module.exports=d("engine.io"):"function"==typeof define&&define.amd?define(function(){return d("engine.io")}):this.eio=d("engine.io")})();
